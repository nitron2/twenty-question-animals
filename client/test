<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Create New Disaster</title>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const table = document.getElementById('table');
    let rowCount = 1; // Keep track of the number of rows

    function addNewRowIfNeeded() {
        // Check if the last input in the last row is filled
        const lastRow = table.querySelector('tr:last-child');
        const inputs = lastRow.querySelectorAll('input');
        const allFilled = Array.from(inputs).every(input => input.value !== '');

        if (allFilled) {
            rowCount++;
            const newRow = table.insertRow(-1);
            const newCell1 = newRow.insertCell(0);
            const newCell2 = newRow.insertCell(1);

            newCell1.innerHTML = `<input type="text" id="need${rowCount}-name" required>`;
            newCell2.innerHTML = `<input type="text" id="need${rowCount}-quantity" required>`;
        }
    }

    table.addEventListener('input', function(event) {
        if (event.target.tagName === 'INPUT') {
            addNewRowIfNeeded();
        }
    });
});

function submitCreateDisasterForm(event) {
    event.preventDefault();
    // Implement form submission logic here
}
</script>
</head>
<body>
<h1>Create new Disaster</h1>
<form id="createDisasterForm" action="http://127.0.0.1:5003/create-disaster" method="POST" enctype="multipart/form-data">
    <h2>Basic Information:</h2>
    <label>City:</label>
    <input type="text" id="city">
    <br>
    <label>Type:</label>
    <input type="text" id="type">
    <br>
    <br>
    <label>Upload an image for the disaster</label>
    <input type="file" id="fileInput" name="file" required>
    <h2>Needs:</h2>
    <table id="table">
        <tbody>
            <tr>
                <td><input type="text" id="need1-name" required></td>
                <td><input type="text" id="need1-quantity" required></td>
            </tr>
        </tbody>
    </table>
    <br>
    <button onclick="submitCreateDisasterForm(event)" type="button">Done</button>
    <div id="imageUploadStatus"></div>
</form>
</body>
</html>
